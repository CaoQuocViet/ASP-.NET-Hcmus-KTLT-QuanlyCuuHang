@page
@model Pages.MH_DonHangNhap_ThemModel

@{
    ViewData["Title"] = "Quản lý cửa hàng";
}

<div class="border border-secondary rounded px-3 mb-3">
    <div class="row pt-2">
        <p class="col-sm-6 text-start fw-bold">Thêm đơn:</p>
        @if (!string.IsNullOrEmpty(Model.sInfoDonNhap))
        {
            <p class="col-sm-6 text-end text-danger fw-bold">@Model.sInfoDonNhap</p>
        }
        else if (Model.formId == 1)
        {
            <p class="col-sm-6 text-end text-success fw-bold">Thêm đơn nhập mới thành công</p>
        }
    </div>
    <form class="row g-3 mb-2" method="post">
        <input type="hidden" id="form" name="form" value="1">
        <input type="hidden" id="khos" name="khos" value="@Model.sKhoList">
        <div class="col-md-3">
            <label for="id" class="form-label">Mã đơn nhập</label>
            <input class="form-control" type="text" id="id" name="id" value="@Model.import.MaSo" maxlength="30" required>
        </div>
        <div class="col-md3">
            <label for="date" class="form-label">Ngày nhập đơn</label>
            <input class="form-control" type="date" id="date" name="date" value="@Model.import.Ngay" required>
        </div>
        <div class="col-md-3 d-sm-flex align-items-end justify-content-end pb-1">
            <input class="btn btn-sm btn-success text-light" type="submit" value="DonNhap">
        </div>
    </form>
</div>

<div class="border border-secondary rounded px-3 mb-3">
    <div class="row pt-2">
        <p class="col-sm-6 text-start fw-bold">Dữ liệu ghi chú</p>
        @if (!string.IsNullOrEmpty(Model.sInfoKho))
        {
            <p class="col-sm-6 text-end text-danger fw-bold">@Model.sInfoKho</p>
        }
        else if (Model.formId == 2)
        {
            <p class="col-sm-6 text-end text-success fw-bold">Thêm bản ghi mới thành công</p>
        }
    </div>
    <form class="row g-3 mb-2" method="post">
        <input type="hidden" id="form" name="form" value="2">
        <input type="hidden" id="khos" name="khos" value="@Model.sKhoList">
        <div class="col-md-3">
            <label for="pname" class="form-label">Tên mặt hàng</label>
            <input class="form-control" type="text" id="pname" name="pname" value="@Model.kho.TenMatHang" maxlength="30" required>
        </div>
        <div class="col-md-3">
            <label for="quantity" class="form-label">Số lượng</label>
            <input class="form-control" type="number" id="quantity" name="quantity" value="@Model.kho.SoLuong" min="1" required>
        </div>
        <div class="col-md-2">
            <label for="mdate" class="form-label">Ngày sản xuất</label>
            <input class="form-control" type="date" id="mdate" name="mdate" value="@Model.kho.NgaySanXuat" required>
        </div>
        <div class="col-md-2">
            <label for="edate" class="form-label">Ngày hết hạn</label>
            <input class="form-control" type="date" id="edate" name="edate" value="@Model.kho.HanDung" required>
        </div>
        <div class="col-md-2 d-sm-flex align-items-end justify-content-end pb-1">
            <input class="btn btn-sm btn-info text-light" type="submit" value="Thêm Bản Ghi">
        </div>
    </form>
</div>

<div class="border border-secondary rounded px-3 mb-3">
    <div class="row pt-2">
        <p class="text-start fw-bold">Bảng Ghi Chú</p>
    </div>
    <div class="text-center table_section">
        <table class="table table-bordered table-striped table-hover align-middle">
            <thead>
                <tr>
                    <th>STT</th>
                    <th>Tên mặt hàng</th>
                    <th>Số Lượng</th>
                    <th>Ngày sản xuất</th>
                    <th>Ngày hết hạn</th>
                </tr>
            </thead>
            <tbody>
                @if (Model.DSkho.Count > 0)
                {
                    int j = 1;
                    for (int i = 0; i < Model.DSkho.Count; i++)
                    {
                        <tr>
                            <td>@j</td>
                            <td>@Model.DSkho[i].TenMatHang</td>
                            <td>@Model.DSkho[i].SoLuong</td>
                            <td>@Model.DSkho[i].NgaySanXuat</td>
                            <td>@Model.DSkho[i].HanDung</td>
                            <td>
                                <form method="post">
                                    <input type="hidden" id="form" name="form" value="3">
                                    <input type="hidden" id="khos" name="khos" value="@Model.sKhoList">
                                    <input type="hidden" id="khos" name="khos" value="@Model.DSkho[i].TenMatHang">
                                    <input type="hidden" id="khos" name="khos" value="@Model.DSkho[i].SoLuong">
                                    <input type="hidden" id="khos" name="khos" value="@Model.DSkho[i].NgaySanXuat">
                                    <input type="hidden" id="khos" name="khos" value="@Model.DSkho[i].HanDung">
                                </form>
                            </td>
                        </tr>
                        j++;
                    }
                }
                else
                {
                    <tr>
                        <td colspan="7" class="text-center fw-bold">Không có dữ liệu</td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>
